REM %1 is the path to the script that initiated this process
REM %2 is the path to the script that called this script.
REM %3 is the RDBMS name required to calculate the location of input and output folders.
if not defined NODE_NO_WARNINGS set NODE_NO_WARNINGS=1
if not defined YADAMU_HOME set YADAMU_HOME=%CD%
if not defined MODE set MODE=DATA_ONLY
set YADAMU_SOURCE=%3
set YADAMU_OPERATION=%4
if not defined YADAMU_TESTNAME set YADAMU_TESTNAME=%5
if not defined YADAMU_TESTNAME set YADAMU_TESTNAME=%4
for %%I in (%~dp1..) do set YADAMU_DATABASE=%%~nxI
for %%I in (%~dp2..) do set YADAMU_VENDOR=%%~nxI
set YADAMU_SCRIPT_PATH=%~dp2
set YADAMU_SCRIPT_PATH=%YADAMU_SCRIPT_PATH:~0,-1%
set YADAMU_BIN=%YADAMU_HOME%\bin
set YADAMU_LOG_ROOT=%YADAMU_HOME%\log
call qa\bin\initializeLogging.bat %YADAMU_TESTNAME%
set YADAMU_QA_JSPATH=%YADAMU_HOME%\src\qa\util
set YADAMU_ENV_PATH=%YADAMU_HOME%\src\install\%YADAMU_DATABASE%
call %YADAMU_ENV_PATH%\env\dbConnection.bat
set YADAMU_SQL_PATH=%YADAMU_HOME%\qa\sql\%YADAMU_VENDOR%
set YADAMU_TEST_OUTPUT=%YADAMU_HOME%\%YADAMU_TEST_FOLDER%
REM JSON Files are in {TEST_OUTPUT}\JSON\{DATABASE} or for Oracle {TEST_OUTPUT\JSON\{DATABASE}\{MODE}
set YADAMU_EXPORT_ROOT=%YADAMU_TEST_OUTPUT%\JSON
set YADAMU_EXPORT_PATH=%YADAMU_EXPORT_ROOT%\%YADAMU_DATABASE%
if not exist %YADAMU_EXPORT_PATH%\. mkdir %YADAMU_EXPORT_PATH%
set YADAMU_IMPORT_MSSQL=%YADAMU_EXPORT_ROOT%\%YADAMU_MSSQL_PATH%
set YADAMU_IMPORT_MYSQL=%YADAMU_EXPORT_ROOT%\%YADAMU_MYSQL_PATH%
set YADAMU_IMPORT_ORACLE=%YADAMU_EXPORT_ROOT%\%YADAMU_ORACLE_PATH%\%MODE%
REM {TEST_OUTPUT}
set YADAMU_OUTPUT_PATH=%YADAMU_TEST_OUTPUT%
REM {TEST_OUTPUT}\{DATABASE}
set YADAMU_OUTPUT_PATH=%YADAMU_OUTPUT_PATH%\%YADAMU_DATABASE%
REM {TEST_OUTPUT}\{DATABASE}\{MODE}
set YADAMU_OUTPUT_PATH=%YADAMU_OUTPUT_PATH%\%MODE%
REM {TEST_OUTPUT}\{DATABASE}\{MODE}{TESTNAME}
if defined YADAMU_OPERATION set YADAMU_OUTPUT_PATH=%YADAMU_OUTPUT_PATH%\%YADAMU_OPERATION%
if not exist %YADAMU_OUTPUT_PATH%\. mkdir %YADAMU_OUTPUT_PATH%
set Y